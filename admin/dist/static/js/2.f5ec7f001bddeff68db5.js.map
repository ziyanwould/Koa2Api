{"version":3,"sources":["webpack:///src/views/article/update.vue","webpack:///./src/views/article/update.vue?b7a5","webpack:///./src/views/article/update.vue","webpack:///src/components/mavonEditerUpload.vue","webpack:///./src/components/mavonEditerUpload.vue?3fbb","webpack:///./src/components/mavonEditerUpload.vue"],"names":["update","components","UploadImages","mavonEditerUpload","computed","extends_default","Object","vuex_esm","categoryList","state","category","uploadTokenData","uploadToken","data","id","this","$route","params","upload","detail","ruleValidate","title","required","message","trigger","author","categoryId","tag","cover","introduction","content","type","min","created","getCategory","getArticleInfo","methods","updateArticle","getArticleDetail","getCategoryList","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","ret","wrap","_context","prev","next","sent","url","$Message","success","t0","console","log","error","stop","_this2","_callee2","_context2","completeUpload","handleEditor","value","handleSubmit","name","_ref","_this3","$refs","validate","_callee3","valid","_context3","_x","apply","arguments","handleReset","resetFields","article_update","render","_vm","_h","$createElement","_c","_self","ref","attrs","model","rules","label-width","label","prop","placeholder","callback","$$v","$set","expression","_v","length","staticStyle","position","z-index","_l","cate","key","_s","_e","on","src","alt","autosize","minRows","maxRows","click","$event","margin-left","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","props","pos","file","loadingStatus","watch","editorChange","$emit","imgAdd","post","handleAvatarSuccess","res","md","$img2Url","handleAvatarError","img_file","components_mavonEditerUpload","ishljs","change","staticClass","display","action","show-upload-list","token","thumbnail-mode","on-success","on-error","ssrContext"],"mappings":"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","file":"static/js/2.f5ec7f001bddeff68db5.js","sourcesContent":["<template>\n  <Form ref=\"detail\" :model=\"detail\" :rules=\"ruleValidate\" :label-width=\"80\">\n    <FormItem label=\"文章标题\" prop=\"title\">\n      <Input v-model=\"detail.title\" placeholder=\"title\"></Input>\n    </FormItem>\n    <FormItem label=\"文章作者\" prop=\"author\">\n      <Input v-model=\"detail.author\" placeholder=\"author\"></Input>\n    </FormItem>\n    <FormItem label=\"文章分类\" prop=\"category\">\n      <Select\n        v-if=\"categoryList.length > 0\"\n        v-model=\"detail.categoryId\"\n        placeholder=\"Select category\"\n        style=\"position:relative;z-index: 9999\">\n        <Option\n          v-for=\"(cate, key) in categoryList\"\n          :key=\"key\"\n          :value=\"cate.id\">\n          {{cate.name}}\n        </Option>\n      </Select>\n    </FormItem>\n    <FormItem label=\"文章标签\" prop=\"introduce\">\n      <Input v-model=\"detail.tag\" placeholder=\"tag\"></Input>\n    </FormItem>\n    <FormItem label=\"文章图片\" prop=\"banner\">\n      <upload-images @completeUpload=\"completeUpload\"/>\n      <div v-if=\"upload\">\n        <img :src=\"upload.url\" alt=\"img\">\n      </div>\n    </FormItem>\n    <FormItem label=\"文章简介\" prop=\"introduce\">\n      <Input v-model=\"detail.introduction\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\"\n             placeholder=\"introduce\"></Input>\n    </FormItem>\n\n    <FormItem label=\"文章内容\" prop=\"content\" v-if=\"uploadTokenData\">\n      <mavon-editer-upload :data=\"detail.content\" @handleEditor=\"handleEditor\"/>\n    </FormItem>\n    <FormItem>\n      <Button @click=\"handleReset('detail')\">重置</Button>\n      <Button type=\"primary\" style=\"margin-left: 8px\" @click=\"handleSubmit('detail')\">更新</Button>\n    </FormItem>\n  </Form>\n</template>\n<script>\n  import {mapState, mapActions} from 'vuex'\n  import UploadImages from '../../components/UploadImages'\n  import mavonEditerUpload from '../../components/mavonEditerUpload'\n\n  export default {\n    components: {\n      UploadImages,\n      mavonEditerUpload\n    },\n    computed: {\n      ...mapState({\n        categoryList: state => state.category.categoryList,\n        uploadTokenData: state => state.uploadToken.uploadTokenData\n      })\n    },\n    data() {\n      return {\n        id: this.$route.params.id,\n        upload: {},\n        detail: {},\n        ruleValidate: {\n          title: [\n            {required: true, message: 'The name cannot be empty', trigger: 'blur'}\n          ],\n          author: [\n            {required: true, message: 'Author cannot be empty', trigger: 'blur'}\n          ],\n          categoryId: [\n            {required: true, message: 'Please select the category', trigger: 'change'}\n          ],\n          tag: [\n            {required: true, message: 'tag cannot be empty', trigger: 'blur'}\n          ], cover: [\n            {required: true, message: 'cover cannot be empty', trigger: 'blur'}\n          ],\n          introduction: [\n            {required: true, message: 'Introduce cannot be empty', trigger: 'blur'}\n          ],\n          content: [\n            {required: true, message: 'Please enter a personal content', trigger: 'blur'},\n            {type: 'string', min: 20, message: 'content no less than 20 words', trigger: 'blur'}\n          ]\n        }\n      }\n    },\n    created() {\n      this.getCategory();\n      this.getArticleInfo();\n    },\n    methods: {\n      ...mapActions({\n        updateArticle: 'article/updateArticle',\n        getArticleDetail: 'article/getArticleDetail',\n        getCategoryList: 'category/getCategoryList'\n      }),\n\n      // 获取文章信息\n      async getArticleInfo() {\n        try {\n          const ret = await this.getArticleDetail(this.id);\n          this.detail = ret;\n          this.upload.url = this.detail.cover;\n          this.$Message.success('获取文章成功')\n\n        } catch (e) {\n          console.log(e)\n          this.$Message.error('获取文章失败')\n        }\n      },\n\n      // 获取分类\n      async getCategory() {\n        try {\n          await this.getCategoryList();\n          this.$Message.success('获取分类成功')\n\n        } catch (e) {\n          this.$Message.error('获取分类失败')\n        }\n      },\n      // 上传图片成功回调\n      completeUpload(data) {\n        this.upload = data;\n        this.detail.cover = data.url;\n      },\n\n      // 传递数值\n      handleEditor(value) {\n        this.detail.content = value;\n      },\n\n      // 提交\n      handleSubmit(name) {\n        this.$refs[name].validate(async (valid) => {\n          if (valid) {\n            try {\n              await this.updateArticle(this.detail);\n              this.$Message.success('更新成功');\n              // window.location.href = \"/article/list\";\n\n            } catch (e) {\n              this.$Message.error('更新失败')\n            }\n          } else {\n            this.$Message.error('Fail!');\n          }\n        })\n      },\n      handleReset(name) {\n        this.$refs[name].resetFields();\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/article/update.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Form',{ref:\"detail\",attrs:{\"model\":_vm.detail,\"rules\":_vm.ruleValidate,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"文章标题\",\"prop\":\"title\"}},[_c('Input',{attrs:{\"placeholder\":\"title\"},model:{value:(_vm.detail.title),callback:function ($$v) {_vm.$set(_vm.detail, \"title\", $$v)},expression:\"detail.title\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"文章作者\",\"prop\":\"author\"}},[_c('Input',{attrs:{\"placeholder\":\"author\"},model:{value:(_vm.detail.author),callback:function ($$v) {_vm.$set(_vm.detail, \"author\", $$v)},expression:\"detail.author\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"文章分类\",\"prop\":\"category\"}},[(_vm.categoryList.length > 0)?_c('Select',{staticStyle:{\"position\":\"relative\",\"z-index\":\"9999\"},attrs:{\"placeholder\":\"Select category\"},model:{value:(_vm.detail.categoryId),callback:function ($$v) {_vm.$set(_vm.detail, \"categoryId\", $$v)},expression:\"detail.categoryId\"}},_vm._l((_vm.categoryList),function(cate,key){return _c('Option',{key:key,attrs:{\"value\":cate.id}},[_vm._v(\"\\n        \"+_vm._s(cate.name)+\"\\n      \")])})):_vm._e()],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"文章标签\",\"prop\":\"introduce\"}},[_c('Input',{attrs:{\"placeholder\":\"tag\"},model:{value:(_vm.detail.tag),callback:function ($$v) {_vm.$set(_vm.detail, \"tag\", $$v)},expression:\"detail.tag\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"文章图片\",\"prop\":\"banner\"}},[_c('upload-images',{on:{\"completeUpload\":_vm.completeUpload}}),_vm._v(\" \"),(_vm.upload)?_c('div',[_c('img',{attrs:{\"src\":_vm.upload.url,\"alt\":\"img\"}})]):_vm._e()],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"文章简介\",\"prop\":\"introduce\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 2,maxRows: 5},\"placeholder\":\"introduce\"},model:{value:(_vm.detail.introduction),callback:function ($$v) {_vm.$set(_vm.detail, \"introduction\", $$v)},expression:\"detail.introduction\"}})],1),_vm._v(\" \"),(_vm.uploadTokenData)?_c('FormItem',{attrs:{\"label\":\"文章内容\",\"prop\":\"content\"}},[_c('mavon-editer-upload',{attrs:{\"data\":_vm.detail.content},on:{\"handleEditor\":_vm.handleEditor}})],1):_vm._e(),_vm._v(\" \"),_c('FormItem',[_c('Button',{on:{\"click\":function($event){_vm.handleReset('detail')}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('detail')}}},[_vm._v(\"更新\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a69ca100\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/article/update.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./update.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./update.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a69ca100\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./update.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/article/update.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <mavon-editor v-model=\"value\" :ishljs=\"true\" ref=md @change=\"editorChange\"\n                  @imgAdd=\"imgAdd\"></mavon-editor>\n    <Upload\n      style=\"display: none\"\n      class=\"avatar-uploader\"\n      action=\"http://up-z2.qiniu.com\"\n      :show-upload-list=\"false\"\n      :data=\"{token: uploadTokenData.token}\"\n      ref=\"file\"\n      :thumbnail-mode=\"true\"\n      :on-success=\"handleAvatarSuccess\"\n      :on-error=\"handleAvatarError\">\n    </Upload>\n  </div>\n</template>\n<style>\n  .v-note-panel {\n    max-height: 400px;\n    height: 400px;\n    overflow: hidden;\n    overflow-y: scroll;\n  }\n</style>\n<script>\n\n  import {mapState, mapActions} from 'vuex'\n\n  export default {\n    props: ['data'],\n    data() {\n      return {\n        value: '',\n        url: null,\n        pos: null,\n        file: null,\n        loadingStatus: false\n      }\n    },\n    computed: {\n      ...mapState({\n        uploadTokenData: state => state.uploadToken.uploadTokenData\n      })\n    },\n\n    created() {\n      if (this.data != null) {\n        this.value = this.data;\n      }\n      ;\n    },\n\n    watch: {\n      data() {\n        if (this.data != null) {\n          this.value = this.data;\n        }\n        ;\n      }\n    },\n\n    methods: {\n\n      // 返回数据\n      editorChange(value) {\n        this.$emit('handleEditor', this.value);\n      },\n\n      // 上传图片\n      imgAdd(pos, file) {\n        this.pos = pos;\n        this.$refs.file.post(file);\n      },\n\n      handleAvatarSuccess(res, file) {\n        const QINIU_IMAGE_DOMAIN = \"http://cdn.boblog.com/\"\n        var url = QINIU_IMAGE_DOMAIN + res.key;\n        this.$refs.md.$img2Url(this.pos, url);\n      },\n\n      // 上传失败\n      handleAvatarError() {\n        delete this.img_file[this.pos];\n      }\n\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/mavonEditerUpload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('mavon-editor',{ref:\"md\",attrs:{\"ishljs\":true},on:{\"change\":_vm.editorChange,\"imgAdd\":_vm.imgAdd},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_vm._v(\" \"),_c('Upload',{ref:\"file\",staticClass:\"avatar-uploader\",staticStyle:{\"display\":\"none\"},attrs:{\"action\":\"http://up-z2.qiniu.com\",\"show-upload-list\":false,\"data\":{token: _vm.uploadTokenData.token},\"thumbnail-mode\":true,\"on-success\":_vm.handleAvatarSuccess,\"on-error\":_vm.handleAvatarError}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-83238eae\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/mavonEditerUpload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-83238eae\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./mavonEditerUpload.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./mavonEditerUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./mavonEditerUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-83238eae\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./mavonEditerUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/mavonEditerUpload.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
webpackJsonp([3],{"13O6":function(t,e){},DoWz:function(t,e){},kzEz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),i=a.n(r),c=a("exGp"),n=a.n(c),s=a("Dd8w"),o=a.n(s),l=a("woOf"),u=a.n(l),g=a("2cg0"),d=a.n(g),h={props:{page:{type:Object,default:{}}},data:function(){return{currentPage:this.$route.query.page||1}},methods:{forward:function(){if(Number(this.currentPage)===Number(this.page.total_pages))return!1;this.handlePage(Number(this.currentPage)+1)},backward:function(){if(1===this.currentPage)return!1;this.handlePage(Number(this.currentPage)-1)},handlePage:function(t){if(this.currentPage===t)return!1;this.currentPage=t;var e=u()({},this.$route.query);e.page=t,this.$router.push({query:d()(this.$route.query,e)}),this.$emit("on-change",t)}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.page?a("section",{staticClass:"page"},[a("div",{staticClass:"page-click"},[a("li",{staticClass:"page-total"},[t._v("共"+t._s(t.page.total)+"条")]),t._v(" "),a("li",{staticClass:"page-click-header",on:{click:t.backward}}),t._v(" "),t._l(t.page.total_pages,function(e,r){return a("li",{key:r,class:r+1===t.page.current_page?"page-click-item page-click-item_active":"page-click-item",on:{click:function(e){t.handlePage(r+1)}}},[t._v("\n      "+t._s(r+1)+"\n    ")])}),t._v(" "),a("li",{staticClass:"page-click-tail",on:{click:t.forward}})],2)]):t._e()},staticRenderFns:[]};var y=a("VU/8")(h,p,!1,function(t){a("DoWz")},"data-v-4c98166c",null).exports,_=a("NYxO"),f={components:{Pagination:y},data:function(){return{categoryActiveIndex:0,isCategoryFixed:!1,categoryList:[],keyword:this.$route.query.keyword,page:this.$route.query.page}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},computed:o()({},Object(_.d)({list:function(t){return t.article.articleList},pagination:function(t){return t.article.pagination}}),{categoryClass:function(){return this.isCategoryFixed?"category category-fixed":"category"},articleClass:function(){return this.isCategoryFixed?"article article-margin-left":"article"}}),created:function(){this._getCategoryList(),this.page?(console.log("啊啊啊"),this._getArticleList(this.page)):this._getArticleList(),this.keyword&&this.search()},methods:o()({},Object(_.b)({getArticleList:"article/getArticleList",getCategoryList:"category/getCategoryList",getCategoryArticle:"category/getCategoryArticle",searchArticle:"article/searchArticle"}),{_getArticleList:function(t){var e=this;return n()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getArticleList({page:t});case 2:case"end":return a.stop()}},a,e)}))()},_getCategoryList:function(){var t=this;return n()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCategoryList({include:"tree"});case 2:a=e.sent,t.categoryList=a.data.data;case 4:case"end":return e.stop()}},e,t)}))()},search:function(){var t=this;return n()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.searchArticle({keyword:t.keyword});case 2:case"end":return e.stop()}},e,t)}))()},_getCategoryArticle:function(t){var e=this;return n()(i.a.mark(function a(){var r,c;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getCategoryArticle({id:t});case 2:r=a.sent,c=[],r.data.data.forEach(function(t){c=t.articles.map(function(t){return t})}),e.$store.commit("article/SET_ARTICLE_LIST",c);case 6:case"end":return a.stop()}},a,e)}))()},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=document.querySelector("#article").offsetTop;this.isCategoryFixed=!!(t>e)},changCategory:function(t,e){this.categoryActiveIndex=e,this._getCategoryArticle(t)},toPathLink:function(t){this.$router.push(t)}})},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("section",{class:t.categoryClass,attrs:{id:"category"}},[t.categoryList.length>0?a("ul",{staticClass:"category-box"},t._l(t.categoryList,function(e,r){return a("li",{key:r,class:t.categoryActiveIndex===r?"category-item category-item-active":"category-item",on:{click:function(a){t.changCategory(e.id,r)}}},[a("img",{attrs:{src:e.icon,alt:e.title}}),t._v("\n        "+t._s(e.name)+"\n        "),e.sub_category?a("span",{class:t.categoryActiveIndex===r?"category-more-icon category-more-icon-active":"category-more-icon"}):t._e(),t._v(" "),e.sub_category?a("div",{staticClass:"category-children"},t._l(e.sub_category,function(e,r){return a("p",{key:r,staticClass:"category-children-item",on:{click:function(a){a.stopPropagation(),t._getCategoryArticle(e.id)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])})):t._e()])})):t._e()]),t._v(" "),a("article",{class:t.articleClass,attrs:{id:"article"}},[t.list.length>0?a("ul",{staticClass:"article-box"},[t._l(t.list,function(e,r){return a("li",{key:r,staticClass:"article-item",on:{click:function(a){t.toPathLink("/article/detail/"+e.id)}}},[a("div",{staticClass:"article-content"},[a("h1",{staticClass:"article-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"article-introduction"},[t._v("\n            "+t._s(e.introduction)+"\n          ")]),t._v(" "),a("div",{staticClass:"article-info"},[e.category?a("span",{staticClass:"article-category"},[t._v("\n              "+t._s(e.category.name)+"\n            ")]):t._e(),t._v(" "),a("span",{staticClass:"article-tag"},[t._v(t._s(e.tag))]),t._v(" "),a("span",{staticClass:"article-browse"},[t._v("阅读："+t._s(e.browser)+"次")]),t._v(" "),a("span",{staticClass:"article-author"},[t._v(t._s(e.author))]),t._v(" "),a("span",{staticClass:"article-author"},[t._v(t._s(e.createdAt))])])]),t._v(" "),a("div",{staticClass:"article-img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cover+"?imageView2/1/w/150/h/150",expression:"item.cover + '?imageView2/1/w/150/h/150'"}],attrs:{alt:"img"}})])])}),t._v(" "),a("div",{staticClass:"page"},[a("pagination",{attrs:{page:t.pagination},on:{"on-change":t._getArticleList}})],1)],2):a("ul",{staticClass:"article-empty"},[t._v("暂无文章")])])])},staticRenderFns:[]};var m=a("VU/8")(f,v,!1,function(t){a("13O6")},"data-v-61e13fc1",null);e.default=m.exports}});
//# sourceMappingURL=3.23739ed375819ca725a6.js.map